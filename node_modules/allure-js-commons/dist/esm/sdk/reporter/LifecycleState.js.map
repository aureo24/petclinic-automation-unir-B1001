{"version":3,"file":"LifecycleState.js","names":["LifecycleState","constructor","_this","_defineProperty","Map","uuid","scopes","get","fixturesResults","_this$getWrappedFixtu","getWrappedFixtureResult","value","testResults","stepResults","_ref","_this$getFixtureResul","getFixtureResult","getTestResult","getStepResult","result","set","delete","type","wrappedResult","data","arguments","length","undefined","scope","_objectSpread","fixtures","tests"],"sources":["../../../../src/sdk/reporter/LifecycleState.ts"],"sourcesContent":["import type { FixtureResult, StepResult, TestResult } from \"../../model.js\";\nimport type { FixtureType, FixtureWrapper, TestScope } from \"./types.js\";\n\nexport class LifecycleState {\n  scopes = new Map<string, TestScope>();\n\n  testResults = new Map<string, TestResult>();\n\n  stepResults = new Map<string, StepResult>();\n\n  fixturesResults = new Map<string, FixtureWrapper>();\n\n  getScope = (uuid: string) => this.scopes.get(uuid);\n\n  getWrappedFixtureResult = (uuid: string) => this.fixturesResults.get(uuid);\n\n  getFixtureResult = (uuid: string) => this.getWrappedFixtureResult(uuid)?.value;\n\n  getTestResult = (uuid: string) => this.testResults.get(uuid);\n\n  getStepResult = (uuid: string) => this.stepResults.get(uuid);\n\n  getExecutionItem = (uuid: string): FixtureResult | TestResult | StepResult | undefined =>\n    this.getFixtureResult(uuid) ?? this.getTestResult(uuid) ?? this.getStepResult(uuid);\n\n  // test results\n  setTestResult = (uuid: string, result: TestResult) => {\n    this.testResults.set(uuid, result);\n  };\n\n  deleteTestResult = (uuid: string) => {\n    this.testResults.delete(uuid);\n  };\n\n  // steps\n  setStepResult = (uuid: string, result: StepResult) => {\n    this.stepResults.set(uuid, result);\n  };\n\n  deleteStepResult = (uuid: string) => {\n    this.stepResults.delete(uuid);\n  };\n\n  // fixtures\n  setFixtureResult = (uuid: string, type: FixtureType, result: FixtureResult) => {\n    const wrappedResult: FixtureWrapper = {\n      uuid,\n      type,\n      value: result,\n    };\n    this.fixturesResults.set(uuid, wrappedResult);\n    return wrappedResult;\n  };\n\n  deleteFixtureResult = (uuid: string) => {\n    this.fixturesResults.delete(uuid);\n  };\n\n  // test scopes\n  setScope = (uuid: string, data: Partial<TestScope> = {}) => {\n    const scope: TestScope = {\n      fixtures: [],\n      tests: [],\n      ...data,\n      uuid,\n    };\n    this.scopes.set(uuid, scope);\n    return scope;\n  };\n\n  deleteScope = (uuid: string) => {\n    this.scopes.delete(uuid);\n  };\n}\n"],"mappings":"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","ignoreList":[]}